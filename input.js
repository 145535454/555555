/**
 * @author Dec
 * @name 青龙变量上传插件
 * @team Dec
 * @version 2.2.5
 * @description 自定义变量并上传到青龙面板,支持预设环境变量和分隔符,查看和删除环境变量,积分系统,每日签到,交互式配置青龙面板
 * @rule ^(上传变量|设置环境变量|查看环境变量|删除环境变量|添加积分|查看积分|签到|配置青龙|[\w\u4e00-\u9fa5]+)\s*(.*)$
 * @admin false
 * @public true
 * @priority 50
 * @disable false
 */

// 作者：Dec
// 参考各种插件，结合AI终于完成第一个插件
// 使用方法：
// 1. 将本文件上传到青龙面板的 plugins/红灯区 目录
// 2. 在本插件通过命令：设置青龙，设置青龙面板的地址、client_id、client_secret（该功能这个版本未测试，建议适配器内设置）
// 3. 在支持直接添加变量， 如：添加变量 变量名=变量值 变量备注  
// 4. 在支持预设置添加环境变量，通过关键字触发该环境变量，如：设置环境变量 变量名 关键字 [分隔符] ，不添加分分隔符则默认填写新变量
// 5. 在支持删除设置的环境变量，如：删除环境变量 关键字
// 6. 在支持查看设置的环境变量，如：查看环境变量
// 7. 在支持查看积分，如：查看积分
// 8. 在支持添加积分，如：添加积分 用户ID 积分数
// 9. 在支持预设置添加积分，通过关键字触发该积分，如：设置环境变量 变量名 关键字 [分隔符] 积分 

const _0x585b=['6Kyl57+q6Z+e6b+A6Z645p6h55iUGMOKwpLDmGXDgBjDuUXCi8OrIsKcXQ==','5pyZ5oiw5Ymx5YSJ6ZWO5a2E5Lq0Pg==','77+V5Yut6Zqr56yX5Lmrw7M=','w7vCjRtYBA==','GcOVIcKOSw==','CAJSworDpg==','wqo7w4rDpELDtsKwCXE=','wobDusORwrAK','HsK1wpjDtg==','X8OyCA==','EMK7woXDuQ==','5puT5pSb546V5aGs5Y226Yap','woDCpMObw4vCuQ==','FVdSDsKfw6HDgFg=','TueYreeMvOWgq+WNsumFueOAgw==','wqZFwo9Cw7s=','wrxhYkrDncOeSMKTVw==','w4zDlMKQwrIs','NuengOWLse++rOW/oeWIuOWLk+S/h+elguWKrgxj','wqnCgcKZGwXDkG8=','5LqH5L+Q5Y+r6YaH5ZG95bis54q25oK756CISw==','wpDCoMOYw4LClcKnHg==','w4LCqMKGwo7DsMOfE2jDssON','wrlBwo8=','FFdVKsKZw7vDn1g=','5LuO5LyS5oqv5Ym177+U5beH5omp6ZmFOA==','5YyD5p6s56y455CN5ZOR5oiJ6IKG6K+u57+h54+H5aCU5Y6O6YeL44C6','wpjCkMKKAA7DhSYDw58=','Rx3Ctlk=','wqpkK8Oxcw==','w7/DpcO4OA==','IxXDsMKd','L8KJEw==','wrxgL8O8','wqdew5bCj8K7QUNF','CSTDs8ODwqMJw4MGcsKS','5Y6S5p66562355CC5ZOG5oiu6IC/5YqL6Zia54yl5aKi5Y+a6YeW44O+','RsOhEcKQ','5pOJ5Ly+5Yya6YWj5aeL6LW+44OA6ZSB6Kyz5Ly45oOzC8OQ','woHCtcOKw5PCtcKm','AT3Dqg==','wpvDgMOpZ8Ow','OMKIe8KLw4MPw68=','wqbDjCXDhMKl','AGx1CQ==','wpXDr8ORwrAawqvDpMOqIMKYfMOhTsKTw4zCgw==','5LiF5L6v5Y+L6YS8','wp/CosKGwofDpw==','w4vDgsKFwqwWwqBQwq7CpsO8','w7nmtJDlip8R','wr4oZCM=','wovDssKJw68cwrQs','6ZeN6K+Pw4U=','XisyCQF0w6s=','woLCl8K5GxLDgzY=','6KyL572I54+m5aKn5Y+n6Yal','wqjku5flkbvlkLzljqjph7U=','wo3CnSwsCw==','HyjDu8OEwqIJ','QHzmi5rpnrDnpLjlibzCql8=','wrdPwptL','wrBdw5TCj8K7','SDV9YsKpw4c=','wr4qw4zDmF/DtMKrJmw=','COW3ouivg+e9qe++kOWFm+mUsOWug+S7iMKX','woTDvsOTwq8W','ADnDtMOXwqMS','w43DhcKSwrc7wqhXwq7Ctg==','5omq5Yu477yjw6zljYfph4DlkKTvvYE=','772g5oic6Z6a56Wf5YuR5LmAwrA=','wr7DpcKBw6kcwoBlw4JeFGvCqcKE','wq7CmVZFNMKVw40rw77ChMKTLic=','Y8OgdA==','CcOfwolnw6sQwrbDhBPDlURsb8Kjwp8yw6DCpUDDj210w5s=','6Z+f6b2p6Z2R5py35Z6A5Z+4','C1dPGcKEw6c=','wpV1asKiEMKY','5p2Q55yt54+m5aKn5Y+n6Yal','w6nCkUcp','USN2d8KCw59JwonCnsKJYGfCtGjDn8O7','5qOl5b+k6ZSm6K+e44GT5q6w56OK5qG75b6U77+N6K2U57yu54+r5aK35Y6L6YWBw7XljbLph7rlkqTDjuWEjOmWneWuiRhe5Yma6ZuQ56+Hf8O95oie6Z6x56aa5YmF','w43DhcKBwqogwrw=','542b5aCc5Y256YSTUw==','5baV5LiI55SJ5omJw5A=','56SJ5YiH77yU5L6r54+O5p+2','546L5aOT5Y+L6YeKw70=','w6zCnANQ','5pyd5pWE5Yu15ZOg5bu2','5by35aap5LqQ5LyQ5Y6m6YWrwrpV5ZCc56eLw6k=','6I+c5Y2m6K+u6ZSM5LuW54mh5aSQ6LSe77yc5ZON5buw5LiQ5rOA5p6p5oiU5Yubwq7CmjDCqFk=','fMO7YcKaw7YSwqzDsMO+','77+45L+Z5YWb5LmS5a+65Yag6IKG6JuP5LmE5Z+f5q225puw56Se44Oi','woPCmsKLwpXDpsKMMQVYJFcnwrwbbxU=','5qKx5b+/6ZSq6K6n44Ky5q+b56Gu5qKG5byG772r5rel5Yq056ad5Yq8K+eVuOaIqx7CjXfnpp/liKLmlpc=','wqNXw4s=','PHBUaC0=','FEZTF8Kew6g=','w7nDpcO/PMKPwqzDvA==','IlMMN8O8X8KKQw==','woLDt+WOr+mHvuWBjOW3iOaLmOWLkQ==','wrTDq8O8PMK0w7HDtVbDv8KN','5Yyy5pyI56+655Kb5ZGS5oqL6IKR6Kya576p6Z+b6b+G6Yee57yF44C1','HxFHwpTDpg==','TOebmOWNgumFv+WDqw==','wrxyYkrDscO2UcKKRmvCvsKCw4w=','QT5nd8K0w4pV','6K6m5Lux5Lya5Yy36YWhRg==','AsKmwo45w7Y=','wrhwZ1fDoA==','6Kyl57+q6Z+e6b+A','6ZyR6b2/6YS5572n5bap5pmf5pSv44OQ','FsKxwoLDsGJO','wqZFwpJPw7Bww6A=','K2dWayY=','I8KeSsKDw5c=','wpvChA4=','TuW1m+WKs+mbjOOCqA==','R8O2fVA=','E8Knwq3DpWRHw5Y=','6K6N6L2H5YaJ6KSW5Yi26ZmC55ir546h5aOk5YyH6YaQ5YeN6Zej5a6F44GH','woEGwokh','RQfDqlwH','wrPDnyXDmMKy','wpvCiio=','w6nDocOtPcKcwrfDvF3DmsKHw59j','56yE5YmX5oiy5Ym55bWt5aKR5YqJ','wrJTw5PCn8Kw','STVgdsK8w4hD','77+n5oqk6Z+456aG5Ymmwphv','C8OWwqJAw7sQwqHDmRfDulVrdsKS','wpUXVSdYQA==','6ZWt6K+x5ZOR5buw54mT5oKDHw==','McKDBGUi','wpZ0bA==','wp3CpsKEworDsw==','woDDleWLvemZpOeursKZcA==','dgfCssOAwoM=','FcOSwqY=','5raP5Yq+56ez5Ymi','5qGM5b+M6Zen6K6644KN6K+J56KH5Lyg5o6N5LyZ5LiX5Y6j6YWi5ZGV44Gu5YWQ6Zay5a225ZGJ5p+F5pW655qC56el5Yi45pWE44K1','C11G','CRNQwo/DsWg=','wrVgKw==','w43DlMKUwpowwrxdwrrCpsOrfEjCuMKy','wpRkaMKnBw==','5YSH6ZSw5a2LXsOF','wpEVwpQt','fuWkmeaztO+9vg==','wrvDjCc=','6Kyu6L245YWa6Kaw5Lmb5L+z55ig5Y6f6YWU77+b5qOW5b2P772e5ZC556ajwrPlg6nCiuWksuaxgQ==','STFj','6K21572u6Z2Z6b6n6Z+25p+P55q86K2Z6ZeN5ZyI5Z6H','PcKUXQ==','PXBQUD3DlyvDrw==','wojCv8KfwpjDqsKDJX/DqsOd','JMKDAEQow4w=','6K6Z5Yeh5L+s55aAwojorIjnva/pnKnpv5rCtuWRoeS4u+mFn+e9jOmerem+vOmeqOafjeS+lOaBquOAkA==','wpRkecKvOMKWw5bDtAIEYcKS','V8OhCsKSMg==','w5FHPUU=','EH9oBQ==','w4dDOUhG','AkBTEcKC','woTCgA7DunM=','wqVhZls=','OVjClsKrwrM=','wqlTw48=','5oui5Yme6Iyc5Y2x6K2/6ZS75LqW54iF','woEbST9E','wqXDnTvDnsK0','wqhvb1s=','6ZeS6K+v5ZOG5bqq5pek5o+eAg==','6K2n576F6Z2t6b6o6Zyz5p6s55igZ8OYwrvCgyUqQHPDh8KR','wogwa37CmgXDp08I','RgfCo8Oewp8pw6I=','wqZTw4zCj8KAR2Y=','QMO2CMKROQ==','wpYXwpEpRA==','5p6f55+f56SD5YqR','w4lH5Yyl6YaP5ZC9WMK+','5ouS5YuFw5s=','wo3DhMOtag==','5oOS55uj56eN5Yug5LqS6La877yl5pa75rCE5omg6KOj5q6n5pO15L6a44Oo5b+o5Yut56SK5Yq9KR0=','5q6Q5Z2W6I6O5Y6F6K6C6Zec5Lu+54mFWMKewrc=','RyEFGxR2w51qwqFfNAA=','wpAUwpgycw3DsMO2eQo=','wqw7w57CtQ==','5Y+Y5p6a56+Z55O75ZCY5ouE6IGC5p6U55ye542Z5aGg5Y686YSQ44OY','w7nnpqDlir7vvoHlvb/li5znpLbliankuLJX','DSTDs8OfwqQ=','I8KeScKfw4EIw7Jc','6YSr5aSM562m5Yu7','wooFwpclUxY=','wrRkNcO6fsKu','wo/Ciio=','5pCZ5L285Yyn6Yeh5aaz6LS+wqk=','wozDncOweMO9Nygpw6EL','wpnDhMOrasOk','XWQbPw==','CsOIw6fDiQ==','5Ymx6Zqf546V5aGs5Y226Yap','GQhGwoM=','FVdREsKJ','5pCU5LyT5aaJ6Lao77y2','RQfDu1Q4w43DrBBCQsK6Sw==','wqTDneWlsOazmU0=','wpcCwo0sSQ==','w7fDocOiPsKuwrY=','wrXChFg=','CsOcPQ==','wq3DtsKcw7w=','5b6a5Yua6K2W57+z55u9542p5aKP5Y226Ye0fRg=','w5jCh8KSwp0=','5q215ZyH5piD5pSQ5ouy5p285ZK25ZKT5Y216YWnGG15','dE7ChMOFw6cHw5Y=','5pyO5pWm5Yij6L6W5Ya4776j5pOr5L685Yym5rW1','aA3CpQ=='];(function(_0x1ea120,_0x585bea){const _0x3f4328=function(_0x3e0618){while(--_0x3e0618){_0x1ea120['push'](_0x1ea120['shift']());}};_0x3f4328(++_0x585bea);}(_0x585b,0xe4));const _0x3f43=function(_0x1ea120,_0x585bea){_0x1ea120=_0x1ea120-0x0;let _0x3f4328=_0x585b[_0x1ea120];if(_0x3f43['rtjOjx']===undefined){(function(){let _0xc054fd;try{const _0x50878a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xc054fd=_0x50878a();}catch(_0x411f1a){_0xc054fd=window;}const _0x5ea5d6='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0xc054fd['atob']||(_0xc054fd['atob']=function(_0x58fe15){const _0x51bba1=String(_0x58fe15)['replace'](/=+$/,'');let _0x164ba4='';for(let _0xeea3f4=0x0,_0x48f39a,_0x246eb3,_0x56ddc6=0x0;_0x246eb3=_0x51bba1['charAt'](_0x56ddc6++);~_0x246eb3&&(_0x48f39a=_0xeea3f4%0x4?_0x48f39a*0x40+_0x246eb3:_0x246eb3,_0xeea3f4++%0x4)?_0x164ba4+=String['fromCharCode'](0xff&_0x48f39a>>(-0x2*_0xeea3f4&0x6)):0x0){_0x246eb3=_0x5ea5d6['indexOf'](_0x246eb3);}return _0x164ba4;});}());const _0x4631a9=function(_0x46e961,_0x44db49){let _0x596fdc=[],_0x336cb5=0x0,_0x1f997e,_0x58ebe8='',_0x3318dc='';_0x46e961=atob(_0x46e961);for(let _0x192f4f=0x0,_0x1d3d57=_0x46e961['length'];_0x192f4f<_0x1d3d57;_0x192f4f++){_0x3318dc+='%'+('00'+_0x46e961['charCodeAt'](_0x192f4f)['toString'](0x10))['slice'](-0x2);}_0x46e961=decodeURIComponent(_0x3318dc);let _0x2cc2f7;for(_0x2cc2f7=0x0;_0x2cc2f7<0x100;_0x2cc2f7++){_0x596fdc[_0x2cc2f7]=_0x2cc2f7;}for(_0x2cc2f7=0x0;_0x2cc2f7<0x100;_0x2cc2f7++){_0x336cb5=(_0x336cb5+_0x596fdc[_0x2cc2f7]+_0x44db49['charCodeAt'](_0x2cc2f7%_0x44db49['length']))%0x100;_0x1f997e=_0x596fdc[_0x2cc2f7];_0x596fdc[_0x2cc2f7]=_0x596fdc[_0x336cb5];_0x596fdc[_0x336cb5]=_0x1f997e;}_0x2cc2f7=0x0;_0x336cb5=0x0;for(let _0x439f67=0x0;_0x439f67<_0x46e961['length'];_0x439f67++){_0x2cc2f7=(_0x2cc2f7+0x1)%0x100;_0x336cb5=(_0x336cb5+_0x596fdc[_0x2cc2f7])%0x100;_0x1f997e=_0x596fdc[_0x2cc2f7];_0x596fdc[_0x2cc2f7]=_0x596fdc[_0x336cb5];_0x596fdc[_0x336cb5]=_0x1f997e;_0x58ebe8+=String['fromCharCode'](_0x46e961['charCodeAt'](_0x439f67)^_0x596fdc[(_0x596fdc[_0x2cc2f7]+_0x596fdc[_0x336cb5])%0x100]);}return _0x58ebe8;};_0x3f43['ZvZkfo']=_0x4631a9;_0x3f43['gxeGrz']={};_0x3f43['rtjOjx']=!![];}const _0x3e0618=_0x3f43['gxeGrz'][_0x1ea120];if(_0x3e0618===undefined){if(_0x3f43['PxIeNn']===undefined){_0x3f43['PxIeNn']=!![];}_0x3f4328=_0x3f43['ZvZkfo'](_0x3f4328,_0x585bea);_0x3f43['gxeGrz'][_0x1ea120]=_0x3f4328;}else{_0x3f4328=_0x3e0618;}return _0x3f4328;};const axios=require(_0x3f43('0xb2','T6%B'));const fs=require('fs');const path=require(_0x3f43('0x6a','PeNv'));const configPath=path['join'](__dirname,_0x3f43('0x3e','JXE^'));const userPointsPath=path['join'](__dirname,_0x3f43('0x44',']K7k'));const userSignInPath=path[_0x3f43('0xd8','pOlp')](__dirname,'user_sign_in.json');function readCustomEnvVars(){if(fs[_0x3f43('0x18','T6%B')](configPath)){return JSON['parse'](fs[_0x3f43('0x71','JdPE')](configPath,_0x3f43('0x27','2Tym')));}return{};}function saveCustomEnvVars(_0x35616c){fs[_0x3f43('0x5d','gL3W')](configPath,JSON[_0x3f43('0x38','apYL')](_0x35616c,null,0x2));}function readUserPoints(){if(fs[_0x3f43('0xb9','4Lxr')](userPointsPath)){return JSON[_0x3f43('0x36','cq#)')](fs[_0x3f43('0x92','2!Rn')](userPointsPath,_0x3f43('0xaf','uEbU')));}return{};}function saveUserPoints(_0x3cb34a){fs[_0x3f43('0x3b','csjq')](userPointsPath,JSON['stringify'](_0x3cb34a,null,0x2));}function readUserSignIn(){if(fs[_0x3f43('0x8f','!1P%')](userSignInPath)){return JSON[_0x3f43('0x20','V)2$')](fs[_0x3f43('0xc1','xhf2')](userSignInPath,_0x3f43('0xbb','$mg&')));}return{};}function saveUserSignIn(_0x4fa91a){fs[_0x3f43('0x3c','*awX')](userSignInPath,JSON[_0x3f43('0xd4','uEbU')](_0x4fa91a,null,0x2));}let customEnvVars=readCustomEnvVars();let userPoints=readUserPoints();let userSignIn=readUserSignIn();const qlConfigSchema=BncrCreateSchema[_0x3f43('0xb5','3W]b')]({'baseUrl':BncrCreateSchema[_0x3f43('0x82','PPz7')]()['setTitle'](_0x3f43('0x3f','m3pu'))[_0x3f43('0x76','JXE^')](_0x3f43('0x8c','gL3W')),'clientId':BncrCreateSchema[_0x3f43('0x55','qy6A')]()[_0x3f43('0xd','qy6A')](_0x3f43('0xa2','2Tym'))[_0x3f43('0x84','apYL')](_0x3f43('0xa1','*awX')),'clientSecret':BncrCreateSchema[_0x3f43('0x41','2!Rn')]()[_0x3f43('0x8e','&Bya')]('Client\x20Secret')['setDescription'](_0x3f43('0xce','JdPE'))});const QlConfigDB=new BncrPluginConfig(qlConfigSchema);module['exports']=async _0x3c7a2f=>{let _0x27e5e5=_0x3c7a2f;const _0x3947ec=_0x27e5e5[_0x3f43('0xba','4Lxr')](0x1);const _0xbc5021=_0x27e5e5[_0x3f43('0x7b','!1P%')](0x2);const _0x202307=await _0x27e5e5[_0x3f43('0x1f','mQ&6')]();const _0x3e0acc=_0x27e5e5[_0x3f43('0x34','uEbU')]();if(_0x3947ec===_0x3f43('0x62','JdPE')){if(!_0x202307){return await _0x27e5e5[_0x3f43('0xc3','3W]b')](_0x3f43('0x5a','n$Ha'));}const [_0x297617,_0x35e28a,_0x2919ac]=_0xbc5021[_0x3f43('0xd1','ougn')]('\x20')[_0x3f43('0xd7','p@ID')](_0x3075a9=>_0x3075a9[_0x3f43('0xc9','3LY7')]());if(!_0x297617||!_0x35e28a||!_0x2919ac){return await _0x27e5e5[_0x3f43('0x54','&Bya')]('格式错误。正确格式：设置青龙\x20青龙面板地址\x20client_id\x20client_secret');}await QlConfigDB[_0x3f43('0x70','&U9N')]({'baseUrl':_0x297617,'clientId':_0x35e28a,'clientSecret':_0x2919ac});return await _0x27e5e5[_0x3f43('0xd3','PPz7')](_0x3f43('0x63','G#Ss'));}else if(_0x3947ec==='签到'){const _0x1b3cbb=new Date()[_0x3f43('0xad','$9qL')]();if(userSignIn[_0x3e0acc]===_0x1b3cbb){return await _0x27e5e5[_0x3f43('0x98','ZkCB')](_0x3f43('0xb4','2!Rn'));}const _0x509186=Math[_0x3f43('0x9a','HFnv')](Math['random']()*0xa)+0x1;userPoints[_0x3e0acc]=(userPoints[_0x3e0acc]||0x0)+_0x509186;userSignIn[_0x3e0acc]=_0x1b3cbb;saveUserPoints(userPoints);saveUserSignIn(userSignIn);return await _0x27e5e5[_0x3f43('0x96','V(yA')](_0x3f43('0x72','PPz7')+_0x509186+_0x3f43('0x49','2!Rn')+userPoints[_0x3e0acc]+'积分');}else if(_0x3947ec===_0x3f43('0x2c','V(yA')){if(!_0x202307){return await _0x27e5e5[_0x3f43('0x12','n$Ha')](_0x3f43('0xf','4Lxr'));}const _0x1cf2eb=_0xbc5021[_0x3f43('0xa6','3W]b')]('\x20')[_0x3f43('0x9b','gwRp')](_0x1ceb22=>_0x1ceb22[_0x3f43('0x1a','p@ID')]());let _0x4cd9c2,_0x98cc3a,_0xa87466,_0x3fea65;if(_0x1cf2eb[_0x3f43('0x37','T6%B')]===0x3){[_0x4cd9c2,_0x98cc3a,_0x3fea65]=_0x1cf2eb;_0xa87466='';}else if(_0x1cf2eb[_0x3f43('0x40','qy6A')]===0x4){[_0x4cd9c2,_0x98cc3a,_0xa87466,_0x3fea65]=_0x1cf2eb;}else{return await _0x27e5e5['reply'](_0x3f43('0x45','*awX'));}if(!_0x4cd9c2||!_0x98cc3a||isNaN(parseInt(_0x3fea65))){return await _0x27e5e5[_0x3f43('0x54','&Bya')](_0x3f43('0x80','!H$b'));}customEnvVars[_0x98cc3a]={'name':_0x4cd9c2,'separator':_0xa87466,'points':parseInt(_0x3fea65)};saveCustomEnvVars(customEnvVars);return await _0x27e5e5['reply'](_0x3f43('0x47','cq#)')+_0x4cd9c2+_0x3f43('0x35','$mg&')+_0x98cc3a+_0x3f43('0xd0','*awX')+(_0xa87466||'无')+_0x3f43('0x3a','T6%B')+_0x3fea65);}else if(_0x3947ec===_0x3f43('0x42','V(yA')){if(!_0x202307){return await _0x27e5e5[_0x3f43('0x24','!1P%')](_0x3f43('0xb0','p@ID'));}const _0x2a1529=Object[_0x3f43('0x5e',']K7k')](customEnvVars)[_0x3f43('0xc','i*vW')](([_0x27aeb8,{name,separator,points}])=>_0x3f43('0x86','BX4t')+_0x27aeb8+_0x3f43('0xa8','3W]b')+name+_0x3f43('0x7c','3LY7')+(separator||'无')+_0x3f43('0x30','T6%B')+points)['join']('\x0a');return await _0x27e5e5[_0x3f43('0x85','2!Rn')](_0x3f43('0xc8','csjq')+(_0x2a1529||_0x3f43('0x0','mQ&6')));}else if(_0x3947ec===_0x3f43('0xbd','mQ&6')){if(!_0x202307){return await _0x27e5e5['reply'](_0x3f43('0x19','JXE^'));}if(!_0xbc5021){return await _0x27e5e5[_0x3f43('0x9d','pxIO')](_0x3f43('0x6c','pOlp'));}if(customEnvVars[_0xbc5021]){delete customEnvVars[_0xbc5021];saveCustomEnvVars(customEnvVars);return await _0x27e5e5[_0x3f43('0x67','mQ&6')](_0x3f43('0x4a',']K7k')+_0xbc5021+_0x3f43('0x69',']&*M'));}else{return await _0x27e5e5[_0x3f43('0x7d','e)u4')](_0x3f43('0xcf','$9qL')+_0xbc5021+_0x3f43('0x3',']&*M'));}}else if(_0x3947ec===_0x3f43('0x7f','BX4t')){if(!_0x202307){return await _0x27e5e5[_0x3f43('0xc3','3W]b')]('只有管理员才能添加积分。');}const [_0x399d42,_0x314f7a]=_0xbc5021['split']('\x20')[_0x3f43('0x8b',']K7k')](_0x1e4a0b=>_0x1e4a0b[_0x3f43('0x21','BX4t')]());if(!_0x399d42||!_0x314f7a){return await _0x27e5e5['reply'](_0x3f43('0x52','m3pu'));}userPoints[_0x399d42]=(userPoints[_0x399d42]||0x0)+parseInt(_0x314f7a);saveUserPoints(userPoints);return await _0x27e5e5[_0x3f43('0x79','G#Ss')](_0x3f43('0x48','qy6A')+_0x399d42+_0x3f43('0x26','*awX')+_0x314f7a+_0x3f43('0xb1','uEbU')+userPoints[_0x399d42]);}else if(_0x3947ec===_0x3f43('0xa7','pOlp')){const _0x285f36=userPoints[_0x3e0acc]||0x0;return await _0x27e5e5[_0x3f43('0xd5','cq#)')]('您当前的积分为:\x20'+_0x285f36);}else if(customEnvVars[_0x3947ec]){const {name:_0x3472e8,separator,points:_0x32a6b3}=customEnvVars[_0x3947ec];const _0x297426=userPoints[_0x3e0acc]||0x0;if(_0x297426<_0x32a6b3){return await _0x27e5e5[_0x3f43('0x6','apYL')](_0x3f43('0xab','PPz7')+_0x297426+_0x3f43('0x75','MUqy')+_0x32a6b3);}await _0x27e5e5[_0x3f43('0x4','i*vW')](_0x3f43('0x5f','mQ&6')+_0x3472e8+_0x3f43('0x5c','T6%B'));const _0x41a464=await _0x27e5e5[_0x3f43('0x5','gL3W')](()=>{},0x3c);if(_0x41a464){const _0x460785=_0x41a464[_0x3f43('0x90','G#Ss')]()[_0x3f43('0x14','q7zx')]();await QlConfigDB[_0x3f43('0xb7','&U9N')]();if(!Object['keys'](QlConfigDB[_0x3f43('0xae','3W]b')])[_0x3f43('0x33',']K7k')]){return await _0x27e5e5[_0x3f43('0x96','V(yA')]('请先使用\x22设置青龙\x22命令配置青龙面板信息。');}const _0x1b94b0=await uploadVariable(_0x27e5e5,QlConfigDB['userConfig'],_0x3472e8,_0x460785,'',separator);if(_0x1b94b0){userPoints[_0x3e0acc]-=_0x32a6b3;saveUserPoints(userPoints);await _0x27e5e5[_0x3f43('0x1e','4Lxr')](_0x3f43('0xe','gwRp')+_0x32a6b3+_0x3f43('0x7','xbmn')+userPoints[_0x3e0acc]);}}else{await _0x27e5e5[_0x3f43('0xa5','p@ID')](_0x3f43('0xcc',']K7k'));}}else if(_0x3947ec===_0x3f43('0x23','pZVT')){await QlConfigDB['get']();if(!Object['keys'](QlConfigDB[_0x3f43('0x25','apYL')])[_0x3f43('0x64','pOlp')]){return await _0x27e5e5[_0x3f43('0x60','!H$b')](_0x3f43('0x91',']&*M'));}if(!_0xbc5021){return await _0x27e5e5[_0x3f43('0x6e','xhf2')](_0x3f43('0x8a','*awX'));}const [_0x4d6350,_0x304537]=_0xbc5021[_0x3f43('0x61','gL3W')]('\x20')[_0x3f43('0x83','n$Ha')](_0x42d0a6=>_0x42d0a6[_0x3f43('0x87','3W]b')]());const [_0x3ab997,_0x560bca]=_0x4d6350[_0x3f43('0x9e','V)2$')]('=')[_0x3f43('0x1d','T6%B')](_0x17b851=>_0x17b851['trim']());if(!_0x3ab997||!_0x560bca){return await _0x27e5e5[_0x3f43('0xbf','qy6A')]('变量格式不正确，请使用\x20名称=值\x20备注\x20的格式');}await uploadVariable(_0x27e5e5,QlConfigDB['userConfig'],_0x3ab997,_0x560bca,_0x304537);}else{return![];}return!![];};async function uploadVariable(_0x29eade,_0x581d9d,_0x39b82e,_0x36b419,_0x2ed214='',_0x1fa890=''){try{console[_0x3f43('0x81','qy6A')](_0x3f43('0x4d','xhf2')+_0x39b82e+_0x3f43('0xc2','ougn')+_0x2ed214+',\x20分隔符='+_0x1fa890);console['log'](_0x3f43('0xac','pxIO'));const _0x4e576b=await axios[_0x3f43('0xb7','&U9N')](_0x581d9d[_0x3f43('0x56','JdPE')]+_0x3f43('0x51','3LY7'),{'params':{'client_id':_0x581d9d[_0x3f43('0x17','gwRp')],'client_secret':_0x581d9d['clientSecret']}});if(_0x4e576b[_0x3f43('0xbc',']&*M')][_0x3f43('0xbe','PPz7')]!==0xc8||!_0x4e576b[_0x3f43('0x13','JdPE')][_0x3f43('0xaa','4Lxr')]||!_0x4e576b[_0x3f43('0x6d','3W]b')]['data']['token']){throw new Error(_0x3f43('0x4e','nMv%'));}const _0x5ebbf6=_0x4e576b[_0x3f43('0x4b','ougn')][_0x3f43('0xc7','csjq')][_0x3f43('0x32','gwRp')];console[_0x3f43('0x8d','mQ&6')](_0x3f43('0x9c','wAi7'));console[_0x3f43('0xc5','*awX')]('正在检查变量是否存在...');const _0x19145e=await axios[_0x3f43('0x53','gwRp')](_0x581d9d[_0x3f43('0xcb','xbmn')]+_0x3f43('0xb','!1P%'),{'headers':{'Authorization':_0x3f43('0x28','csjq')+_0x5ebbf6}});const _0x5d6f3f=_0x19145e[_0x3f43('0x6d','3W]b')][_0x3f43('0x95','BX4t')][_0x3f43('0x77','pxIO')](_0x47db1c=>_0x47db1c[_0x3f43('0x99','gL3W')]===_0x39b82e);console[_0x3f43('0xcd','e)u4')](_0x3f43('0xa9','3LY7')+_0x5d6f3f[_0x3f43('0xc4','JdPE')]+_0x3f43('0x2d','ougn'));let _0x1efe2b;if(_0x5d6f3f[_0x3f43('0xb6','n$Ha')]>0x0&&_0x1fa890){console['log'](_0x3f43('0xca','xbmn'));const _0x593677=_0x5d6f3f[_0x3f43('0x89','V)2$')](_0x5383b3=>{const _0x1d7f87=''+_0x5383b3[_0x3f43('0x73','gwRp')]+_0x1fa890+_0x36b419;console[_0x3f43('0x3d','pZVT')]('更新变量:\x20ID='+_0x5383b3['id']);return axios[_0x3f43('0x7a','2!Rn')](_0x581d9d[_0x3f43('0xa4','gwRp')]+_0x3f43('0x59','JdPE'),{'id':_0x5383b3['id'],'value':_0x1d7f87,'name':_0x39b82e,'remarks':_0x2ed214||_0x5383b3[_0x3f43('0x65','i*vW')]||''},{'headers':{'Authorization':_0x3f43('0xa3','e)u4')+_0x5ebbf6,'Content-Type':_0x3f43('0x22','cq#)')}});});_0x1efe2b=await Promise[_0x3f43('0xc6','nMv%')](_0x593677);}else{console[_0x3f43('0x15','G#Ss')]('正在添加新变量...');_0x1efe2b=await axios[_0x3f43('0x11','ZLcF')](_0x581d9d[_0x3f43('0xa','wAi7')]+'/open/envs',[{'value':_0x36b419,'name':_0x39b82e,'remarks':_0x2ed214||''}],{'headers':{'Authorization':_0x3f43('0x8','MUqy')+_0x5ebbf6,'Content-Type':'application/json'}});}console[_0x3f43('0x3d','pZVT')](_0x3f43('0x9','m3pu'),Array['isArray'](_0x1efe2b)?_0x1efe2b[_0x3f43('0x68','ZkCB')](_0x2bd664=>_0x2bd664[_0x3f43('0x2f','T6%B')]):_0x1efe2b[_0x3f43('0x46','apYL')]);if(Array[_0x3f43('0x2b','MUqy')](_0x1efe2b)?_0x1efe2b[_0x3f43('0x5b','PPz7')](_0x547d18=>_0x547d18[_0x3f43('0x43','m3pu')][_0x3f43('0x9f','gL3W')]===0xc8):_0x1efe2b[_0x3f43('0x95','BX4t')][_0x3f43('0x31','i*vW')]===0xc8){const _0x481d34=_0x5d6f3f['length']>0x0&&_0x1fa890?'更新':'添加';await _0x29eade[_0x3f43('0x1','wAi7')](_0x481d34+_0x3f43('0x39','PPz7')+_0x39b82e+_0x3f43('0x88','BX4t')+(_0x2ed214||'无')+_0x3f43('0x58','ougn')+_0x481d34+_0x3f43('0x50','cq#)'));return!![];}else{throw new Error(_0x3f43('0xc0','uEbU')+(Array[_0x3f43('0x6b','pOlp')](_0x1efe2b)?JSON[_0x3f43('0x4f','pZVT')](_0x1efe2b[_0x3f43('0x7e','JXE^')](_0x118010=>_0x118010[_0x3f43('0xd6','pOlp')])):JSON[_0x3f43('0x38','apYL')](_0x1efe2b[_0x3f43('0x94','V(yA')])));}}catch(_0xc03aaa){console[_0x3f43('0x2e','&U9N')](_0x3f43('0xb8','i*vW'),_0xc03aaa[_0x3f43('0x74',']K7k')]);if(_0xc03aaa[_0x3f43('0x57','9!^o')]){console[_0x3f43('0x66','&Bya')](_0x3f43('0x78','BX4t'),_0xc03aaa[_0x3f43('0xb3','mQ&6')][_0x3f43('0x1c','wAi7')]);console[_0x3f43('0x6f','V)2$')](_0x3f43('0xa0','gL3W'),JSON[_0x3f43('0x10','MUqy')](_0xc03aaa[_0x3f43('0x2','qy6A')][_0x3f43('0x16','n$Ha')]));}else if(_0xc03aaa['request']){console[_0x3f43('0x97','qy6A')](_0x3f43('0x4c','ZLcF'));}else{console[_0x3f43('0x93','p@ID')](_0x3f43('0x29','i*vW'),_0xc03aaa['message']);}await _0x29eade[_0x3f43('0xd2','nMv%')](_0x3f43('0x1b','e)u4')+_0xc03aaa[_0x3f43('0x2a','$9qL')]);return![];}}
